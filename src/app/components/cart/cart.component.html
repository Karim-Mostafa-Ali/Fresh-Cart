<section class="my-5">
  <div
    class="product-details bg-white w-75 mx-auto"
    *ngIf="cartProducts.products.length != 0"
  >
    <div class="product-body py-4">
      <div class="d-flex justify-content-between align-items-start">
        <h1 class="pb-3">Shop Cart</h1>
        <button class="btn btn-outline-danger" (click)="clear()">
          Clear Cart
        </button>
      </div>

      <div
        class="row align-items-center my-2 border-bottom py-3"
        *ngFor="let cartProduct of cartProducts.products"
      >
        <div class="col-md-2">
          <img
            [src]="cartProduct.product.imageCover"
            [alt]=""
            class="w-100 rounded-2 overflow-hidden"
            height="150"
          />
        </div>
        <div class="col-md-10">
          <div class="row flex-wrap justify-content-between align-items-center">
            <div class="col-md-10">
              <p class="h5">{{ cartProduct.product.title }}</p>
              <p class="h5 py-2">
                Price : {{ cartProduct.price | currency : "EGP " }}
              </p>
              <button
                #removebtn
                class="btn-danger btn mb-3"
                (click)="removeItem(cartProduct.product._id, removebtn)"
              >
                <i class="fa-solid fa-trash pe-2"></i> Remove
              </button>
            </div>
            <div
              class="col-md-2 d-flex justify-content-center align-items-baseline"
            >
              <button
                class="btn btn-outline-success px-2 py-1"
                (click)="
                  changeCount(cartProduct.product._id, cartProduct.count + 1)
                "
              >
                <i class="fa-solid fa-plus"></i>
              </button>
              <p class="px-3 h5">{{ cartProduct.count }}</p>
              <button
                class="btn btn-outline-danger px-2 py-1"
                (click)="
                  changeCount(cartProduct.product._id, cartProduct.count - 1)
                "
              >
                <i class="fa-solid fa-minus"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div
        class="d-flex justify-content-between align-items-baseline pt-2 flex-wrap"
      >
        <h4>
          <span class="text-gradient">Total Price : </span>
          {{ cartProducts.totalCartPrice | currency : "EGP " }}
        </h4>
        <button
          class="btn-sec py-0"
          [routerLink]="['/checkout', cartProducts._id]"
        >
          Online Payment <img src="./assets/images/visa-1.svg" alt="" />
        </button>
      </div>
    </div>
  </div>
  <div
    class="product-details bg-white w-75 mx-auto"
    *ngIf="cartProducts.products.length == 0"
  >
    <div class="product-body py-4">
      <h1 class="text-center">Your Cart is Empty ....</h1>
    </div>
  </div>
</section>
