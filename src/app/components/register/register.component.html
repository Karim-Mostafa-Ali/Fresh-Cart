<section>
  <div class="form-container my-4">
    <h1>Register Now</h1>
    <form class="form" [formGroup]="registerForm" (ngSubmit)="handleform()">
      <div class="form-group">
        <label for="name">Name</label>
        <input
          required
          formControlName="name"
          #name
          name="name"
          id="name"
          type="text"
          [class.invalid]="
            registerForm.get('name')?.errors &&
            (registerForm.get('name')?.touched || name.value.length > 0)
          "
        />
        <div
          class="mb-0 pb-0"
          *ngIf="
            registerForm.get('name')?.errors &&
            (registerForm.get('name')?.touched || name.value.length > 0)
          "
        >
          <p
            *ngIf="registerForm.get('name')?.getError('required')"
            class="text-danger fs-6"
          >
            Name is Required.
          </p>
          <p
            *ngIf="registerForm.get('name')?.getError('minlength')"
            class="text-danger fs-6"
          >
            Name must be at least 3 characters.
          </p>
          <p
            *ngIf="registerForm.get('name')?.getError('maxlength')"
            class="text-danger fs-6"
          >
            Name must be between 3 and 20 characters.
          </p>
        </div>
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input
          required
          formControlName="email"
          name="email"
          #email
          id="email"
          type="text"
          [class.invalid]="
            registerForm.get('email')?.errors &&
            (registerForm.get('email')?.touched || email.value.length > 0)
          "
        />
        <div
          *ngIf="
            registerForm.get('email')?.errors &&
            (registerForm.get('email')?.touched || email.value.length > 0)
          "
        >
          <p
            *ngIf="registerForm.get('email')?.getError('required')"
            class="text-danger fs-6"
          >
            Email is Required.
          </p>
          <p
            *ngIf="registerForm.get('email')?.getError('email')"
            class="text-danger fs-6"
          >
            Email is not valid.
          </p>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input
          required
          formControlName="password"
          name="password"
          #password
          id="password"
          type="password"
          [class.invalid]="
            registerForm.get('password')?.errors &&
            (registerForm.get('password')?.touched || password.value.length > 0)
          "
        />
        <div
          *ngIf="
            registerForm.get('password')?.errors &&
            (registerForm.get('password')?.touched || password.value.length > 0)
          "
        >
          <p
            *ngIf="registerForm.get('password')?.getError('required')"
            class="text-danger fs-6"
          >
            Password is Required.
          </p>
          <p
            *ngIf="registerForm.get('password')?.getError('pattern')"
            class="text-danger fs-6"
          >
            password must start with upperCase then from 6 to 10 characters.
          </p>
        </div>
      </div>

      <div class="form-group">
        <label for="rePassword">Re-Password</label>
        <input
          required
          formControlName="rePassword"
          name="rePassword"
          #rePassword
          id="rePassword"
          type="password"
          [class.invalid]="
            registerForm.get('rePassword')?.errors &&
            (registerForm.get('rePassword')?.touched ||
              rePassword.value.length > 0)
          "
        />
        <div
          *ngIf="
            registerForm.get('rePassword')?.errors &&
            (registerForm.get('rePassword')?.touched ||
              rePassword.value.length > 0)
          "
        >
          <p
            *ngIf="registerForm.get('rePassword')?.getError('required')"
            class="text-danger fs-6"
          >
            Repassword is Required.
          </p>
          <p
            *ngIf="registerForm.get('rePassword')?.getError('mismatch')"
            class="text-danger fs-6"
          >
            Repassword didn't match
          </p>
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Phone</label>
        <input
          required
          formControlName="phone"
          name="phone"
          #phone
          id="phone"
          type="tel"
          [class.invalid]="
            registerForm.get('phone')?.errors &&
            (registerForm.get('phone')?.touched || phone.value.length > 0)
          "
        />
        <div
          *ngIf="
            registerForm.get('phone')?.errors &&
            (registerForm.get('phone')?.touched || phone.value.length > 0)
          "
        >
          <p
            *ngIf="registerForm.get('phone')?.getError('required')"
            class="text-danger fs-6"
          >
            Phone is Required.
          </p>
          <p
            *ngIf="registerForm.get('phone')?.getError('pattern')"
            class="text-danger fs-6"
          >
            Accept only egypt phone numbers.
          </p>
        </div>
      </div>

      <button
        [disabled]="registerForm.invalid"
        type="submit"
        class="btn-main d-block ms-auto"
      >
        <i *ngIf="isLoading" class="fas fa-spin fa-spinner"></i>
        Register
      </button>
      <p *ngIf="msgError" class="text-danger text-center fs-4">
        {{ msgError }}
      </p>
    </form>
  </div>
</section>
